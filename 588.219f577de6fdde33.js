(self.webpackChunkmyrtex_mf=self.webpackChunkmyrtex_mf||[]).push([[588],{1588:(P,m,o)=>{o.r(m),o.d(m,{AuthModule:()=>A,UserActionEnum:()=>i,loginCheck:()=>h,loginError:()=>g,loginOut:()=>L,loginPending:()=>d,loginSuccess:()=>l,selectUser:()=>$,selectUserIsLoading:()=>R,selectUserIsLogin:()=>F,selectUserState:()=>f});var v=o(8701),e=o(9866),r=o(2393),i=function(t){return t.LoginPending="[User] Login Pending",t.LoginSuccess="[User] Login Success",t.LoginError="[User] Login Error",t.LoginCheck="[User] Login Check",t.LoginOut="[User] Login Out",t}(i||{});const d=(0,e.createAction)(i.LoginPending,(0,e.props)()),l=(0,e.createAction)(i.LoginSuccess,(0,e.props)()),g=(0,e.createAction)(i.LoginError),h=(0,e.createAction)(i.LoginCheck),L=(0,e.createAction)(i.LoginOut),E=(0,e.createReducer)({user:{login:"",password:""},isLoading:!1,isLogin:!1},(0,e.on)(d,t=>({...t,isLoading:!0})),(0,e.on)(l,(t,{user:S})=>({...t,isLoading:!1,isLogin:!0,user:S})),(0,e.on)(g,t=>({...t,isLoading:!1,isLogin:!0})),(0,e.on)(h,t=>({...t,isLoading:!0})),(0,e.on)(L,t=>({...t,isLogin:!0,user:{login:"",password:""}})));function M(t,S){return E(t,S)}var p=o(2778),u=o(4866),s=o(2331),y=o(4411);let I=(()=>{class t{constructor(c){this._http=c}getUser(c){return this._http.get("https://testdb-a01ea-default-rtdb.firebaseio.com/data.json")}static#t=this.\u0275fac=function(a){return new(a||t)(s.\u0275\u0275inject(y.HttpClient))};static#e=this.\u0275prov=s.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var C=o(2057);let O=(()=>{class t{constructor(c,a,x,N){this.actions$=c,this.store=a,this.userService=x,this._router=N,this.login$=(0,r.createEffect)(()=>this.actions$.pipe((0,r.ofType)(d),(0,p.switchMap)(({user:n})=>"admin"===n.login&&"123"===n.password?(localStorage.setItem("user",JSON.stringify(n)),this._router.navigate(["/"]),(0,u.of)(l({user:n}))):(0,u.of)(g())))),this.checkLogin$=(0,r.createEffect)(()=>this.actions$.pipe((0,r.ofType)(h),(0,p.switchMap)(()=>{const n=localStorage.getItem("user");if(n){const j=JSON.parse(n);return(0,u.of)(l({user:j}))}return(0,u.of)(g())}))),this.logout$=(0,r.createEffect)(()=>this.actions$.pipe((0,r.ofType)(L),(0,p.switchMap)(()=>(localStorage.removeItem("user"),this._router.navigate(["/"]),(0,u.of)(g()))))),this.catchErrorHandler=(n,j)=>(0,u.of)(g())}static#t=this.\u0275fac=function(a){return new(a||t)(s.\u0275\u0275inject(r.Actions),s.\u0275\u0275inject(e.Store),s.\u0275\u0275inject(I),s.\u0275\u0275inject(C.Router))};static#e=this.\u0275prov=s.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})}return t})(),A=(()=>{class t{static#t=this.\u0275fac=function(a){return new(a||t)};static#e=this.\u0275mod=s.\u0275\u0275defineNgModule({type:t});static#o=this.\u0275inj=s.\u0275\u0275defineInjector({imports:[v.CommonModule,e.StoreModule.forFeature("user",M),r.EffectsModule.forFeature([O])]})}return t})();const f=(0,e.createFeatureSelector)("user"),$=(0,e.createSelector)(f,t=>t?.user),F=(0,e.createSelector)(f,t=>t?.isLogin),R=(0,e.createSelector)(f,t=>t?.isLoading)}}]);